# SebeJJ 玩家系统测试用例

## 文档信息

| 项目 | 内容 |
|------|------|
| 所属系统 | 玩家系统 (Player Systems) |
| 覆盖模块 | MechController, MechStats, PlayerData, Inventory |
| 用例总数 | 28 |

---

## 1. MechController 测试用例

### TC-MC-001: 基础移动 - WASD输入
| 属性 | 内容 |
|------|------|
| 优先级 | P0 |
| 测试类型 | 功能测试 |
| 前置条件 | 玩家机甲已生成，Input System配置完成 |

**测试步骤:**
1. 按下 W 键
2. 验证机甲向上移动
3. 按下 S 键
4. 验证机甲向下移动
5. 按下 A 键
6. 验证机甲向左移动
7. 按下 D 键
8. 验证机甲向右移动

**预期结果:**
- 各方向移动响应正确
- 移动速度符合配置值
- 移动平滑无卡顿

---

### TC-MC-002: 基础移动 - 摇杆输入
| 属性 | 内容 |
|------|------|
| 优先级 | P0 |
| 测试类型 | 功能测试 |

**测试步骤:**
1. 使用手柄左摇杆
2. 各方向推动摇杆
3. 验证移动方向对应

**预期结果:**
- 摇杆输入正确映射
- 支持360度移动

---

### TC-MC-003: 移动速度配置
| 属性 | 内容 |
|------|------|
| 优先级 | P0 |
| 测试类型 | 单元测试 |

**测试步骤:**
1. 设置 `moveSpeed = 5f`
2. 测量实际移动速度
3. 修改 `moveSpeed = 10f`
4. 再次测量

**预期结果:**
- 实际速度与配置值一致
- 速度变化即时生效

---

### TC-MC-004: 旋转控制
| 属性 | 内容 |
|------|------|
| 优先级 | P0 |
| 测试类型 | 功能测试 |

**测试步骤:**
1. 鼠标移动到机甲右侧
2. 验证机甲向右旋转
3. 鼠标移动到机甲左侧
4. 验证机甲向左旋转

**预期结果:**
- 机甲面向鼠标方向
- 旋转平滑自然
- 旋转速度符合配置

---

### TC-MC-005: 浮力物理效果
| 属性 | 内容 |
|------|------|
| 优先级 | P0 |
| 测试类型 | 物理测试 |

**测试步骤:**
1. 机甲静止在水中
2. 观察浮力效果
3. 验证缓慢上浮趋势
4. 测试不同深度浮力变化

**预期结果:**
- 存在向上的浮力
- 浮力大小可配置
- 深度影响浮力表现

---

### TC-MC-006: 深度系统 - Y轴映射
| 属性 | 内容 |
|------|------|
| 优先级 | P0 |
| 测试类型 | 功能测试 |

**测试步骤:**
1. 记录初始 Y 坐标
2. 向下移动
3. 验证 `currentDepth` 增加
4. 向上移动
5. 验证 `currentDepth` 减少

**预期结果:**
- Y轴负方向 = 深度增加
- 深度计算准确
- 深度显示正确

---

### TC-MC-007: 最大深度限制
| 属性 | 内容 |
|------|------|
| 优先级 | P1 |
| 测试类型 | 边界测试 |

**测试步骤:**
1. 设置 `maxDepth = 1000f`
2. 尝试超过最大深度
3. 观察系统行为

**预期结果:**
- 无法超过最大深度
- 或触发压强伤害
- 有视觉/音效反馈

---

### TC-MC-008: 压强伤害系统
| 属性 | 内容 |
|------|------|
| 优先级 | P1 |
| 测试类型 | 功能测试 |

**测试步骤:**
1. 超过安全深度
2. 验证压强伤害触发
3. 验证伤害值正确
4. 返回安全深度
5. 验证伤害停止

**预期结果:**
- 超深时受到伤害
- 伤害与深度成正比
- 返回安全区后停止

---

### TC-MC-009: 碰撞检测 - 墙壁
| 属性 | 内容 |
|------|------|
| 优先级 | P0 |
| 测试类型 | 物理测试 |

**测试步骤:**
1. 控制机甲撞向墙壁
2. 验证碰撞发生
3. 验证机甲被阻挡
4. 验证无穿墙

**预期结果:**
- 碰撞检测正常
- 机甲被正确阻挡
- 无穿墙现象

---

### TC-MC-010: 碰撞检测 - 资源节点
| 属性 | 内容 |
|------|------|
| 优先级 | P1 |
| 测试类型 | 功能测试 |

**测试步骤:**
1. 接近资源节点
2. 触发碰撞
3. 验证采集事件触发

**预期结果:**
- 碰撞触发采集
- 事件参数正确

---

### TC-MC-011: Rigidbody配置验证
| 属性 | 内容 |
|------|------|
| 优先级 | P1 |
| 测试类型 | 配置测试 |

**测试步骤:**
1. 检查 Rigidbody2D 组件
2. 验证 BodyType 为 Dynamic
3. 验证重力设置
4. 验证碰撞检测模式

**预期结果:**
- 配置符合设计
- 物理表现正确

---

## 2. MechStats 测试用例

### TC-MS-001: ScriptableObject创建
| 属性 | 内容 |
|------|------|
| 优先级 | P0 |
| 测试类型 | 单元测试 |

**测试步骤:**
1. 右键创建 MechStats SO
2. 配置各项属性
3. 保存并验证

**预期结果:**
- SO创建成功
- 属性可配置
- 数据持久化

---

### TC-MS-002: 基础属性读取
| 属性 | 内容 |
|------|------|
| 优先级 | P0 |
| 测试类型 | 单元测试 |

**测试步骤:**
1. 创建测试SO，设置属性值
2. 读取各属性
3. 验证数值正确

**预期结果:**
- 所有属性读取正确
- 默认值符合预期

---

### TC-MS-003: 属性修改器 - 加法
| 属性 | 内容 |
|------|------|
| 优先级 | P1 |
| 测试类型 | 功能测试 |

**测试步骤:**
1. 基础速度 = 5
2. 添加 +2 速度修改器
3. 验证最终速度 = 7

**预期结果:**
- 修改器正确应用
- 计算顺序正确

---

### TC-MS-004: 属性修改器 - 乘法
| 属性 | 内容 |
|------|------|
| 优先级 | P1 |
| 测试类型 | 功能测试 |

**测试步骤:**
1. 基础速度 = 5
2. 添加 x1.5 速度修改器
3. 验证最终速度 = 7.5

**预期结果:**
- 乘法修改器正确应用
- 先加后乘顺序正确

---

### TC-MS-005: 多修改器叠加
| 属性 | 内容 |
|------|------|
| 优先级 | P1 |
| 测试类型 | 功能测试 |

**测试步骤:**
1. 基础值 = 10
2. 添加 +5 修改器
3. 添加 x2 修改器
4. 验证最终值 = 30

**预期结果:**
- 多个修改器正确叠加
- 计算顺序符合设计

---

### TC-MS-006: 修改器移除
| 属性 | 内容 |
|------|------|
| 优先级 | P1 |
| 测试类型 | 功能测试 |

**测试步骤:**
1. 添加临时修改器
2. 验证效果生效
3. 移除修改器
4. 验证属性恢复

**预期结果:**
- 修改器可正确移除
- 属性值正确恢复

---

## 3. PlayerData 测试用例

### TC-PD-001: 生命值系统 - 初始化
| 属性 | 内容 |
|------|------|
| 优先级 | P0 |
| 测试类型 | 单元测试 |

**测试步骤:**
1. 创建 PlayerData
2. 验证初始生命值 = maxHealth

**预期结果:**
- 生命值初始化为最大值

---

### TC-PD-002: 生命值系统 - 受到伤害
| 属性 | 内容 |
|------|------|
| 优先级 | P0 |
| 测试类型 | 功能测试 |

**测试步骤:**
1. 当前生命 = 100
2. 受到 20 伤害
3. 验证生命 = 80
4. 验证事件已触发

**预期结果:**
- 生命值正确减少
- 事件通知UI更新

---

### TC-PD-003: 生命值系统 - 治疗
| 属性 | 内容 |
|------|------|
| 优先级 | P0 |
| 测试类型 | 功能测试 |

**测试步骤:**
1. 当前生命 = 50
2. 治疗 30
3. 验证生命 = 80

**预期结果:**
- 生命值正确增加
- 不超过最大值

---

### TC-PD-004: 生命值系统 - 死亡判定
| 属性 | 内容 |
|------|------|
| 优先级 | P0 |
| 测试类型 | 功能测试 |

**测试步骤:**
1. 当前生命 = 10
2. 受到 20 伤害
3. 验证生命 = 0
4. 验证死亡事件触发

**预期结果:**
- 生命值不低于0
- 死亡事件正确触发
- 游戏结束流程启动

---

### TC-PD-005: 能量系统 - 消耗与恢复
| 属性 | 内容 |
|------|------|
| 优先级 | P0 |
| 测试类型 | 功能测试 |

**测试步骤:**
1. 满能量状态
2. 使用技能消耗能量
3. 验证能量减少
4. 等待恢复
5. 验证能量回升

**预期结果:**
- 能量消耗正确
- 能量自然恢复
- 不超过最大值

---

### TC-PD-006: 氧气系统 - 深度消耗
| 属性 | 内容 |
|------|------|
| 优先级 | P0 |
| 测试类型 | 功能测试 |

**测试步骤:**
1. 在浅水区，验证氧气消耗慢
2. 下潜到深水区
3. 验证氧气消耗加快
4. 返回基地
5. 验证氧气恢复

**预期结果:**
- 深度影响消耗速率
- 基地可补充氧气
- 氧气耗尽触发伤害

---

### TC-PD-007: 氧气系统 - 耗尽效果
| 属性 | 内容 |
|------|------|
| 优先级 | P1 |
| 测试类型 | 功能测试 |

**测试步骤:**
1. 让氧气降至0
2. 验证窒息伤害触发
3. 验证警告提示显示

**预期结果:**
- 氧气耗尽后持续伤害
- UI显示警告

---

### TC-PD-008: 数据序列化
| 属性 | 内容 |
|------|------|
| 优先级 | P0 |
| 测试类型 | 数据测试 |

**测试步骤:**
1. 修改 PlayerData 各字段
2. 序列化为JSON
3. 反序列化
4. 验证数据一致

**预期结果:**
- 所有字段正确序列化
- 反序列化后数据完整

---

## 4. Inventory 测试用例

### TC-INV-001: 物品添加 - 空背包
| 属性 | 内容 |
|------|------|
| 优先级 | P0 |
| 测试类型 | 功能测试 |

**测试步骤:**
1. 空背包状态
2. 添加 5 个铜矿
3. 验证背包中有铜矿x5

**预期结果:**
- 物品正确添加
- 数量正确

---

### TC-INV-002: 物品添加 - 堆叠
| 属性 | 内容 |
|------|------|
| 优先级 | P0 |
| 测试类型 | 功能测试 |

**测试步骤:**
1. 背包已有铜矿x5
2. 再添加铜矿x3
3. 验证铜矿x8

**预期结果:**
- 相同物品堆叠
- 数量累加正确

---

### TC-INV-003: 物品添加 - 超过堆叠上限
| 属性 | 内容 |
|------|------|
| 优先级 | P1 |
| 测试类型 | 边界测试 |

**测试步骤:**
1. 设置铜矿堆叠上限 = 10
2. 已有铜矿x8
3. 添加铜矿x5
4. 验证结果

**预期结果:**
- 一格达到上限10
- 剩余5占用新格

---

### TC-INV-004: 物品移除
| 属性 | 内容 |
|------|------|
| 优先级 | P0 |
| 测试类型 | 功能测试 |

**测试步骤:**
1. 背包有铜矿x10
2. 移除铜矿x3
3. 验证铜矿x7

**预期结果:**
- 数量正确减少
- 为0时移除物品

---

### TC-INV-005: 背包容量限制
| 属性 | 内容 |
|------|------|
| 优先级 | P1 |
| 测试类型 | 边界测试 |

**测试步骤:**
1. 填满背包
2. 尝试添加新物品
3. 观察系统行为

**预期结果:**
- 无法添加超出容量
- 提示背包已满

---

### TC-INV-006: 负重系统
| 属性 | 内容 |
|------|------|
| 优先级 | P1 |
| 测试类型 | 功能测试 |

**测试步骤:**
1. 空载时记录移动速度
2. 添加重物
3. 验证速度降低
4. 移除重物
5. 验证速度恢复

**预期结果:**
- 负重影响移动速度
- 负重与物品重量相关

---

## 5. 集成测试用例

### TC-PLY-INT-001: 移动与属性关联
| 属性 | 内容 |
|------|------|
| 优先级 | P0 |
| 测试类型 | 集成测试 |

**测试步骤:**
1. 修改 MechStats 速度属性
2. 验证 MechController 移动速度变化

**预期结果:**
- 属性变化影响移动
- 实时更新

---

### TC-PLY-INT-002: 伤害与UI联动
| 属性 | 内容 |
|------|------|
| 优先级 | P0 |
| 测试类型 | 集成测试 |

**测试步骤:**
1. 玩家受到伤害
2. 验证 PlayerData 更新
3. 验证事件触发
4. 验证 HUD 更新

**预期结果:**
- 数据-事件-UI链路正常

---

### TC-PLY-INT-003: 采集与背包联动
| 属性 | 内容 |
|------|------|
| 优先级 | P1 |
| 测试类型 | 集成测试 |

**测试步骤:**
1. 接近资源节点
2. 采集资源
3. 验证背包添加物品
4. 验证负重更新

**预期结果:**
- 采集流程完整
- 数据同步正确

---

## 附录: 测试配置

### 测试用机甲属性
```
maxHealth: 100
maxEnergy: 100
maxOxygen: 100
armor: 10
pressureResistance: 100
speed: 5
turnRate: 180
miningPower: 1
cargoCapacity: 50
```

### 测试用输入配置
```
WASD - 移动
鼠标 - 瞄准/旋转
左键 - 主武器
右键 - 副武器
E - 交互/采集
Tab - 打开背包
Esc - 暂停
```

---

**文档版本:** 1.0  
**创建日期:** 2026-02-26  
**作者:** 测试工程师 Agent
