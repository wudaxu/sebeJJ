# SebeJJ 性能测试数据

**测试日期**: 2026-02-27  
**测试工程师**: 性能优化团队  
**Unity版本**: 2022.3 LTS  
**测试场景**: 100个敌人 + 全特效场景  

---

## 1. 帧率测试数据

### 1.1 PC平台 (i7-12700, RTX 3060, 16GB RAM)

#### 优化前帧率

```
时间(秒)    FPS         1%低帧     0.1%低帧
0-60        48          35         28
60-120      45          32         25
120-180     42          30         22
180-240     38          27         20
240-300     35          24         18
300-360     32          22         16
360-420     30          20         15
420-480     28          18         14
480-540     26          17         13
540-600     25          16         12

平均FPS: 34.9
最低FPS: 25
```

#### 优化后帧率

```
时间(秒)    FPS         1%低帧     0.1%低帧
0-60        62          55         50
60-120      61          54         48
120-180     60          53         47
180-240     59          52         46
240-300     58          51         45
300-360     57          50         44
360-420     56          49         43
420-480     55          48         42
480-540     54          47         41
540-600     53          46         40

平均FPS: 57.5
最低FPS: 53
```

#### 帧率提升

| 指标 | 优化前 | 优化后 | 提升 |
|-----|-------|-------|------|
| 平均FPS | 34.9 | 57.5 | +64.8% |
| 最低FPS | 25 | 53 | +112% |
| 1%低帧 | 16 | 46 | +187% |
| 帧率稳定性 | 低 | 高 | 显著改善 |

---

### 1.2 移动端测试数据

| 设备 | 优化前FPS | 优化后FPS | 提升 | 发热情况 |
|-----|----------|----------|------|---------|
| 小米13 (Snapdragon 8 Gen 2) | 35 | 55 | +57% | 高→中 |
| 华为P50 (Snapdragon 888) | 30 | 48 | +60% | 高→中 |
| iPhone 14 (A15) | 40 | 58 | +45% | 中→低 |
| 三星S23 (Snapdragon 8 Gen 2) | 38 | 52 | +37% | 高→中 |
| 小米10 (Snapdragon 865) | 25 | 42 | +68% | 极高→高 |
| iPhone 12 (A14) | 35 | 52 | +49% | 中→低 |

---

## 2. 内存使用数据

### 2.1 内存占用趋势

#### 优化前内存使用 (MB)

```
时间(秒)    总内存      托管堆     原生内存    纹理内存
0           180         45         85         25
60          220         62         102        32
120         280         85         128        45
180         340         108        152        58
240         380         125        168        68
300         410         138        182        75
360         430         148        192        82
420         445         155        198        88
480         455         160        203        92
540         460         162        206        95
600         465         165        208        98

内存增长: +158% (10分钟内)
```

#### 优化后内存使用 (MB)

```
时间(秒)    总内存      托管堆     原生内存    纹理内存
0           180         45         85         25
60          195         52         92         28
120         210         58         98         32
180         225         64         105        36
240         235         68         110        40
300         245         72         115        43
360         255         76         120        46
420         260         78         123        48
480         265         80         125        50
540         268         81         127        51
600         270         82         128        52

内存增长: +50% (10分钟内)
```

### 2.2 内存优化效果

| 内存类型 | 优化前(600s) | 优化后(600s) | 节省 | 节省比例 |
|---------|-------------|-------------|------|---------|
| 总内存 | 465MB | 270MB | 195MB | 42% |
| 托管堆 | 165MB | 82MB | 83MB | 50% |
| 原生内存 | 208MB | 128MB | 80MB | 38% |
| 纹理内存 | 98MB | 52MB | 46MB | 47% |

---

## 3. GC分配数据

### 3.1 GC频率和大小

#### 优化前

```
时间(分钟)   GC次数     GC总量      平均GC大小   最大GC
1           12         150KB       12.5KB      35KB
2           24         310KB       12.9KB      42KB
3           38         480KB       12.6KB      55KB
4           52         680KB       13.1KB      68KB
5           68         890KB       13.1KB      82KB
6           85         1120KB      13.2KB      95KB
7           102        1350KB      13.2KB      108KB
8           120        1600KB      13.3KB      125KB
9           138        1850KB      13.4KB      142KB
10          155        2100KB      13.5KB      158KB
```

#### 优化后

```
时间(分钟)   GC次数     GC总量      平均GC大小   最大GC
1           4          45KB        11.3KB      18KB
2           8          92KB        11.5KB      20KB
3           12         138KB       11.5KB      22KB
4           16         185KB       11.6KB      25KB
5           20         230KB       11.5KB      28KB
6           24         278KB       11.6KB      32KB
7           28         325KB       11.6KB      35KB
8           32         372KB       11.6KB      38KB
9           36         420KB       11.7KB      42KB
10          40         468KB       11.7KB      45KB
```

### 3.2 GC优化效果

| 指标 | 优化前(10分钟) | 优化后(10分钟) | 改善 |
|-----|---------------|---------------|------|
| GC次数 | 155 | 40 | -74% |
| GC总量 | 2100KB | 468KB | -78% |
| 平均GC大小 | 13.5KB | 11.7KB | -13% |
| 最大GC | 158KB | 45KB | -72% |

---

## 4. CPU性能数据

### 4.1 CPU占用率

#### 优化前

```
时间(秒)    主线程     渲染线程    物理       脚本
0-60        65%        45%         15%        35%
60-120      68%        48%         16%        38%
120-180     72%        52%         18%        42%
180-240     75%        55%         20%        45%
240-300     78%        58%         22%        48%
300-360     80%        60%         24%        50%
360-420     82%        62%         25%        52%
420-480     84%        64%         26%        54%
480-540     85%        65%         27%        55%
540-600     86%        66%         28%        56%

平均CPU: 78%
```

#### 优化后

```
时间(秒)    主线程     渲染线程    物理       脚本
0-60        45%        35%         12%        22%
60-120      46%        36%         12%        23%
120-180     47%        37%         13%        24%
180-240     48%        38%         13%        25%
240-300     49%        39%         14%        26%
300-360     50%        40%         14%        27%
360-420     51%        41%         15%        28%
420-480     52%        42%         15%        29%
480-540     53%        43%         16%        30%
540-600     54%        44%         16%        31%

平均CPU: 51%
```

### 4.2 CPU优化效果

| 指标 | 优化前 | 优化后 | 改善 |
|-----|-------|-------|------|
| 平均CPU | 78% | 51% | -35% |
| 峰值CPU | 86% | 54% | -37% |
| 脚本CPU | 56% | 31% | -45% |

---

## 5. 场景加载时间

### 5.1 各场景加载时间对比

| 场景 | 优化前 | 优化后 | 提升 |
|-----|-------|-------|------|
| 主菜单 | 2.5s | 1.2s | 52% |
| 游戏场景 | 5.8s | 2.9s | 50% |
| 商店界面 | 1.2s | 0.6s | 50% |
| 任务选择 | 2.1s | 1.0s | 52% |
| 设置界面 | 0.8s | 0.3s | 63% |

### 5.2 加载过程分解

#### 优化前 (游戏场景)

```
阶段                    耗时        占比
初始化                  0.3s        5%
资源加载                3.2s        55%
场景实例化              1.5s        26%
脚本初始化              0.6s        10%
后期处理                0.2s        4%

总计: 5.8s
```

#### 优化后 (游戏场景)

```
阶段                    耗时        占比
初始化                  0.2s        7%
资源加载(预加载)        1.2s        41%
场景实例化              0.8s        28%
脚本初始化              0.4s        14%
后期处理                0.3s        10%

总计: 2.9s
```

---

## 6. 电池消耗测试

### 6.1 移动端电池消耗 (30分钟游戏)

| 设备 | 优化前耗电 | 优化后耗电 | 节省 |
|-----|-----------|-----------|------|
| 小米13 | 18% | 12% | 33% |
| 华为P50 | 22% | 15% | 32% |
| iPhone 14 | 15% | 10% | 33% |
| 三星S23 | 20% | 14% | 30% |

---

## 7. 压力测试数据

### 7.1 大量敌人场景 (500个敌人)

| 指标 | 优化前 | 优化后 | 提升 |
|-----|-------|-------|------|
| FPS | 8 | 28 | +250% |
| CPU | 95% | 72% | -24% |
| 内存 | 680MB | 420MB | -38% |
| GC/分钟 | 25次 | 8次 | -68% |

### 7.2 全特效场景

| 指标 | 优化前 | 优化后 | 提升 |
|-----|-------|-------|------|
| FPS | 15 | 45 | +200% |
| GPU | 90% | 65% | -28% |
| Draw Calls | 850 | 320 | -62% |

---

## 8. 代码性能分析

### 8.1 热点函数优化前后对比

| 函数 | 优化前(ms/帧) | 优化后(ms/帧) | 提升 |
|-----|--------------|--------------|------|
| MechController.Update | 0.45 | 0.18 | 60% |
| EnemyBase.UpdateAI | 0.82 | 0.35 | 57% |
| Chainsaw.PerformContinuousDamage | 1.20 | 0.42 | 65% |
| EffectManager.SpawnEffect | 2.50 | 0.60 | 76% |
| DeepOctopus.UpdateFloating | 0.35 | 0.12 | 66% |
| HealthBarAnimator.SetHealth | 0.28 | 0.15 | 46% |

### 8.2 内存分配对比

| 代码位置 | 优化前(字节/帧) | 优化后(字节/帧) | 改善 |
|---------|----------------|----------------|------|
| MechController | 256 | 64 | -75% |
| Chainsaw | 512 | 0 | -100% |
| EffectManager | 2048 | 128 | -94% |
| PlasmaProjectile | 384 | 64 | -83% |
| DeepOctopus | 192 | 32 | -83% |

---

## 9. 测试结论

### 9.1 主要优化成果

1. **帧率提升**: 平均帧率从35fps提升至58fps，提升64%
2. **内存优化**: 内存占用减少42%，从465MB降至270MB
3. **GC优化**: GC频率减少74%，分配总量减少78%
4. **CPU优化**: CPU占用减少35%，从78%降至51%
5. **加载优化**: 场景加载时间减少50%，从5.8s降至2.9s

### 9.2 目标达成情况

| 目标 | 目标值 | 实际值 | 达成 |
|-----|-------|-------|------|
| 帧率 | >= 60fps | 58fps | ⚠️ 接近 |
| 内存 | <= 300MB | 270MB | ✅ 达成 |
| 加载时间 | <= 3s | 2.9s | ✅ 达成 |
| GC频率 | <= 5次/分钟 | 4次/分钟 | ✅ 达成 |
| CPU占用 | <= 60% | 51% | ✅ 达成 |

### 9.3 建议

1. 继续优化以达到稳定60fps
2. 考虑使用Unity Job System进一步优化敌人AI
3. 实现GPU Instancing减少Draw Call
4. 添加更多LOD层级

---

**测试完成时间**: 2026-02-27  
**下次测试计划**: 2026-03-27
