# Week 2 功能测试清单 - 核心系统验证

**版本**: v2.0  
**日期**: 2026-02-26  
**阶段**: Week 2 - 核心系统测试

---

## Week 2 新增测试覆盖

### 新增功能模块
1. **委托-机甲联动** - 委托目标与机甲功能的交互
2. **资源-下潜联动** - 深度对资源消耗的影响
3. **多系统并发** - 多个系统同时工作的稳定性
4. **边界条件** - 极限状态下的系统行为

---

## 1. 委托-机甲系统联动测试

### 1.1 委托目标与机甲功能
| ID | 测试项 | 测试步骤 | 预期结果 | 优先级 |
|----|--------|----------|----------|--------|
| QM-001 | 采集委托执行 | 接取采集委托→执行采集 | 采集动作触发委托进度更新 | P0 |
| QM-002 | 扫描委托执行 | 接取扫描委托→使用扫描 | 扫描结果触发委托进度更新 | P0 |
| QM-003 | 深度委托执行 | 接取下潜委托→到达目标深度 | 深度检测触发委托完成 | P0 |
| QM-004 | 移动限制委托 | 接取限时委托→机甲移动 | 能源/氧气消耗影响完成时间 | P0 |
| QM-005 | 采集中断恢复 | 采集中断→重新采集 | 委托进度保持，可继续完成 | P0 |

### 1.2 委托状态与机甲状态
| ID | 测试项 | 测试步骤 | 预期结果 | 优先级 |
|----|--------|----------|----------|--------|
| QM-006 | 委托失败时机甲状态 | 委托超时失败 | 机甲保持当前状态，无异常 | P0 |
| QM-007 | 委托完成时资源消耗 | 完成采集委托 | 正确计算并扣除消耗的资源 | P0 |
| QM-008 | 多委托资源冲突 | 同时接取多个资源消耗委托 | 资源消耗正确累计 | P1 |

---

## 2. 资源-下潜系统联动测试

### 2.1 深度对资源消耗的影响
| ID | 测试项 | 测试步骤 | 预期结果 | 优先级 |
|----|--------|----------|----------|--------|
| RD-001 | 深度氧气消耗 | 在不同深度停留 | 深度越大氧气消耗越快 | P0 |
| RD-002 | 深度能源消耗 | 在深海使用功能 | 深海功能能源消耗增加 | P0 |
| RD-003 | 压力对机甲影响 | 超过安全深度 | 机甲受损，修复消耗资源 | P0 |
| RD-004 | 危险区资源消耗 | 进入热液喷口区 | 能源快速消耗用于防护 | P0 |
| RD-005 | 极限深度生存 | 在1000m+深度 | 资源消耗倍增，考验管理 | P0 |

### 2.2 资源管理与下潜策略
| ID | 测试项 | 测试步骤 | 预期结果 | 优先级 |
|----|--------|----------|----------|--------|
| RD-006 | 资源不足预警 | 氧气/能源低于安全线 | 预警提示，建议上浮 | P0 |
| RD-007 | 紧急上浮 | 资源耗尽时上浮 | 上浮速度受限，风险增加 | P0 |
| RD-008 | 资源分配决策 | 背包有限时选择物品 | 正确计算携带资源的最优解 | P1 |

---

## 3. 多系统并发测试

### 3.1 系统并发操作
| ID | 测试项 | 测试步骤 | 预期结果 | 优先级 |
|----|--------|----------|----------|--------|
| MC-001 | 移动中采集 | 移动时执行采集 | 采集需要停止移动 | P0 |
| MC-002 | 采集中扫描 | 采集过程中使用扫描 | 扫描打断采集或等待完成 | P0 |
| MC-003 | 扫描中移动 | 扫描波扩散时移动 | 扫描继续，位置更新正确 | P0 |
| MC-004 | 多委托同时追踪 | 3个委托同时进行 | 追踪标记不冲突，进度正确 | P0 |
| MC-005 | UI操作与游戏操作 | 打开背包时移动 | 背包打开时暂停或允许背景移动 | P0 |

### 3.2 并发资源竞争
| ID | 测试项 | 测试步骤 | 预期结果 | 优先级 |
|----|--------|----------|----------|--------|
| MC-006 | 能源并发消耗 | 移动+扫描同时 | 能源正确扣除总和 | P0 |
| MC-007 | 氧气并发计算 | 下潜+受损同时 | 氧气消耗正确累加 | P0 |
| MC-008 | 背包并发操作 | 采集+丢弃同时 | 操作队列执行，无数据错误 | P0 |

---

## 4. 边界条件测试

### 4.1 数值边界
| ID | 测试项 | 测试步骤 | 预期结果 | 优先级 |
|----|--------|----------|----------|--------|
| BD-001 | 零氧气状态 | 氧气归零后继续活动 | 机甲受损，紧急提示 | P0 |
| BD-002 | 零能源状态 | 能源归零后使用功能 | 功能禁用，提示能源不足 | P0 |
| BD-003 | 满背包采集 | 背包满时尝试采集 | 无法采集，提示清理背包 | P0 |
| BD-004 | 最大深度边界 | 达到机甲最大深度 | 无法继续下潜，提示升级 | P0 |
| BD-005 | 委托时间边界 | 倒计时归零瞬间 | 精确判定，无时间误差 | P0 |

### 4.2 极限场景
| ID | 测试项 | 测试步骤 | 预期结果 | 优先级 |
|----|--------|----------|----------|--------|
| BD-006 | 极限深度生存 | 1500m深度生存3分钟 | 系统稳定，资源消耗正确 | P0 |
| BD-007 | 连续采集极限 | 连续采集50个物品 | 无内存泄漏，性能稳定 | P0 |
| BD-008 | 快速操作极限 | 每秒5次操作持续1分钟 | 系统响应正常，无卡顿 | P0 |
| BD-009 | 多危险区叠加 | 同时处于多个危险效果中 | 伤害正确叠加，可正常脱离 | P0 |

---

## 5. 异常处理测试

### 5.1 异常情况恢复
| ID | 测试项 | 测试步骤 | 预期结果 | 优先级 |
|----|--------|----------|----------|--------|
| EH-001 | 采集中断线 | 采集中强制退出 | 重新登录后可继续采集 | P0 |
| EH-002 | 委托进行中存档 | 委托进行中保存 | 读档后委托状态正确恢复 | P0 |
| EH-003 | 资源负数保护 | 尝试消耗超过拥有的资源 | 资源不会变为负数 | P0 |
| EH-004 | 位置越界保护 | 移动到地图边界外 | 位置被限制在有效范围内 | P0 |

---

## Week 2 测试执行状态

| 模块 | 新增用例 | 总用例 | 已通过 | 失败 | 未测试 |
|------|----------|--------|--------|------|--------|
| 委托-机甲联动 | 8 | 8 | - | - | 8 |
| 资源-下潜联动 | 8 | 8 | - | - | 8 |
| 多系统并发 | 8 | 8 | - | - | 8 |
| 边界条件 | 9 | 9 | - | - | 9 |
| 异常处理 | 4 | 4 | - | - | 4 |
| **Week 2 新增** | **37** | **37** | **0** | **0** | **37** |
| Week 1 基础 | - | 59 | - | - | 59 |
| **累计总计** | **37** | **96** | **0** | **0** | **96** |

---

## Week 2 测试重点说明

### 测试重点
1. **系统集成验证** - 确保各系统间数据传递正确
2. **边界条件覆盖** - 验证极限状态下的系统稳定性
3. **并发操作测试** - 确保多操作同时进行时的正确性
4. **异常恢复测试** - 验证异常情况下的数据完整性

### 测试数据需求
- 边界值测试数据（0, 1, 最大值, 最大值+1）
- 并发操作测试场景
- 极限深度测试存档（save_slot_4）

### 自动化测试重点
- 数值边界自动化验证
- 并发操作序列自动化
- 性能基准持续监控
