# 赛博机甲SebeJJ - 委托任务流程文档

## 概述
本文档描述了5个新委托任务（Q004-Q008）的设计和流程。

---

## 任务解锁顺序

```
Q004 深海初探 (探索类)
    ↓
Q005 清除威胁 (歼灭类) ←─┐
    ↓                     │
Q006 稀有金属 (采集类) ←─┤
    ↓                     │
Q007 护送科学家 (护送类) ←┘
    ↓
Q008 巨型机械蟹 (狩猎类 - Boss战)
```

---

## Q004 - 深海初探

### 基本信息
- **类型**: 探索类
- **难度**: ★☆☆☆☆
- **预计时间**: 10分钟
- **奖励**: 1500信用点 + 300经验

### 任务目标
1. 到达100米深度
2. 安全返回水面

### 任务流程
```
[开始] → [下潜至100米] → [自动收集数据] → [返回水面] → [完成]
```

### 关键机制
- 深度监测系统实时跟踪玩家位置
- 到达目标深度后自动触发数据收集
- 必须返回水面才算完成

### 解锁内容
- 深度100米区域访问权限

---

## Q005 - 清除威胁

### 基本信息
- **类型**: 歼灭类
- **难度**: ★★☆☆☆
- **预计时间**: 15分钟
- **奖励**: 2000信用点 + 400经验

### 前置条件
- 完成Q004

### 任务目标
- 击败5只机械鱼

### 任务流程
```
[开始] → [前往50-150米区域] → [击败机械鱼×5] → [完成]
```

### 关键机制
- 动态生成机械鱼敌人
- 实时计数显示击败进度
- 敌人死亡事件监听

### 解锁内容
- 战斗类委托类型

---

## Q006 - 稀有金属

### 基本信息
- **类型**: 采集类
- **难度**: ★★☆☆☆
- **预计时间**: 20分钟
- **奖励**: 2500信用点 + 500经验

### 前置条件
- 完成Q004

### 任务目标
- 在80米深度采集3个钛合金

### 任务流程
```
[开始] → [前往80米采集点] → [采集钛合金×3] → [完成]
```

### 关键机制
- 固定采集点位置
- 小地图标记显示
- 物品收集事件监听

### 采集点坐标
- (-20, -80, 10)
- (15, -80, -25)
- (30, -80, 20)

---

## Q007 - 护送科学家

### 基本信息
- **类型**: 护送类
- **难度**: ★★★☆☆
- **预计时间**: 25分钟
- **奖励**: 3500信用点 + 700经验

### 前置条件
- 完成Q005和Q006

### 任务目标
- 护送科学家NPC到达120米研究站

### 任务流程
```
[开始] → [科学家加入队伍] → [护送下潜至120米] → [到达研究站] → [完成]
```

### 关键机制
- NPC跟随系统（跟随距离5米，速度0.8倍）
- NPC生命值监测（100点）
- 实时NPC血条显示
- NPC死亡则任务失败

### 特殊事件
- 途中可能遭遇机械鱼袭击
- 需要保护NPC不受伤害

### 解锁内容
- 研究站访问权限

---

## Q008 - 巨型机械蟹 (Boss战)

### 基本信息
- **类型**: 狩猎类 (Boss)
- **难度**: ★★★★★
- **预计时间**: 30分钟
- **奖励**: 8000信用点 + 1500经验 + 稀有掉落

### 前置条件
- 完成Q004、Q005、Q006、Q007

### 任务目标
- 击败Boss"铁钳巨兽"

### 任务流程
```
[开始] → [Boss登场动画] → [第一阶段(100%-60%血量)] → 
[第二阶段(60%-30%血量)] → [第三阶段(30%-0%血量)] → 
[击败Boss] → [掉落收集] → [完成]
```

### Boss数据
- **名称**: 铁钳巨兽
- **血量**: 5000
- **位置**: 180米深度
- **弱点**: 电击伤害

### 攻击模式
1. **巨钳砸击**: 近战范围高伤害
2. **气泡爆发**: 范围攻击，击退效果
3. **冲锋攻击**: 直线突进，造成路径伤害

### 阶段变化

#### 第一阶段 (100%-60%)
- 基础攻击模式
- 攻击间隔较长

#### 第二阶段 (60%-30%)
- 进入狂暴状态
- 攻击速度提升30%
- 新增连续攻击组合

#### 第三阶段 (30%-0%)
- 释放全部力量
- 攻击速度提升60%
- 伤害提升50%
- 背景音乐会变化

### 掉落物品
- 巨兽之钳 (制作材料)
- 稀有核心 (升级材料)
- 大量信用点

### 解锁内容
- 高级委托类型
- 传奇装备制作权限

---

## 文件清单

### 配置文件
- `Q004_Config.json` - 深海初探配置
- `Q005_Config.json` - 清除威胁配置
- `Q006_Config.json` - 稀有金属配置
- `Q007_Config.json` - 护送科学家配置
- `Q008_Config.json` - 巨型机械蟹配置

### 任务脚本
- `Q004_Script.cs` - 深海初探脚本
- `Q005_Script.cs` - 清除威胁脚本
- `Q006_Script.cs` - 稀有金属脚本
- `Q007_Script.cs` - 护送科学家脚本
- `Q008_Script.cs` - 巨型机械蟹脚本

### 对话文本
- `Q004_Dialogue.json` - 深海初探对话
- `Q005_Dialogue.json` - 清除威胁对话
- `Q006_Dialogue.json` - 稀有金属对话
- `Q007_Dialogue.json` - 护送科学家对话
- `Q008_Dialogue.json` - 巨型机械蟹对话

---

## 技术说明

### 依赖系统
- PlayerController: 玩家控制和深度检测
- UIManager: 任务UI显示
- EventManager: 事件订阅/发布
- AudioManager: 音效播放
- Minimap: 小地图标记
- NPCManager: NPC生成和管理
- BossManager: Boss生成和管理
- ItemManager: 物品生成和掉落
- GameProgress: 游戏进度和解锁

### 扩展建议
1. 可以添加任务分支选择
2. 可以增加时间限制挑战
3. 可以添加隐藏目标和额外奖励
4. 可以设计多人合作版本

---

*文档版本: 1.0*
*创建日期: 2026-02-27*
