/**
 * @file BossDesignDocument.md
 * @brief 铁钳巨兽Boss设计文档
 * @description 完整的Boss战设计规范，包含机制、数值和实现细节
 * @author Boss战设计师
 * @date 2026-02-27
 */

# 铁钳巨兽 Boss设计文档

## 1. 概述

### 1.1 背景设定
铁钳巨兽是赛博机甲SebeJJ的最终Boss，一只巨大的机械螃蟹，守护着深海核心区域。它曾经是深海采矿机械，被病毒感染后变成了狂暴的战斗机器。

### 1.2 设计理念
- **压迫感**：巨大的体型、震撼的攻击、多阶段变化
- **策略性**：每个阶段需要不同的应对策略
- **节奏感**：攻击-防御-反击的循环
- **视觉冲击力**：华丽的特效和动画

### 1.3 战斗时长
- 预计战斗时长：5-8分钟
- 阶段分布：
  - 第一阶段：2-3分钟（60%血量）
  - 第二阶段：2-3分钟（30%血量）
  - 第三阶段：1-2分钟（剩余血量）

---

## 2. 基础属性

### 2.1 核心数值
| 属性 | 数值 | 说明 |
|------|------|------|
| 最大生命值 | 5000 HP | 高血量提供持久战斗体验 |
| 移动速度 | 3 m/s | 基础移动速度 |
| 旋转速度 | 180°/s | 转向速度 |
| 攻击伤害 | 50 | 基础攻击力 |

### 2.2 阶段阈值
| 阶段 | 血量阈值 | 触发条件 |
|------|----------|----------|
| 第一阶段 | 100% - 60% | 战斗开始 |
| 第二阶段 | 60% - 30% | 血量≤60% |
| 第三阶段 | 30% - 0% | 血量≤30% |

### 2.3 阶段转换
- **转换时间**：3秒动画 + 2秒无敌
- **无敌时间**：5秒（防止爆发输出跳过阶段）
- **视觉表现**：全身发光、屏幕震动、音效变化

---

## 3. 第一阶段（100%-60%血量）

### 3.1 钳击连击
**机制说明**：
- 3连击攻击，每次攻击范围和伤害递增
- 可格挡（需要时机把握）

**数值**：
| 连击数 | 伤害 | 范围 | 角度 |
|--------|------|------|------|
| 第1击 | 40 | 3m | 90° |
| 第2击 | 48 | 3m | 90° |
| 第3击 | 56 | 3m | 90° |

**应对策略**：
- 格挡：在攻击前0.3秒按下格挡键
- 闪避：向侧面翻滚躲避
- 反击：第3击后有1.5秒硬直

### 3.2 冲撞攻击
**机制说明**：
- 预警红线显示冲撞路径
- 高伤害但可预判
- 撞到障碍物会眩晕

**数值**：
- 伤害：60
- 速度：12 m/s
- 距离：10m
- 预警时间：1.5秒
- 冷却：8秒

**应对策略**：
- 垂直于红线方向闪避
- 引诱Boss撞向岩石障碍物
- 利用冲撞后的眩晕输出

### 3.3 防御姿态
**机制说明**：
- 减伤50%
- 可以缓慢转向
- 破防后眩晕2秒

**数值**：
- 持续时间：4秒
- 冷却：10秒
- 减伤：50%
- 破防眩晕：2秒

**应对策略**：
- 等待防御结束
- 使用破防技能打破防御
- 防御期间攻击侧面或背后

---

## 4. 第二阶段（60%-30%血量）

### 4.1 属性提升
- 攻击速度：+30%
- 移动速度：+20%
- AI更激进

### 4.2 钳子激光扫射
**机制说明**：
- 120°扇形激光扫射
- 持续伤害
- 可以跳跃躲避

**数值**：
- 每秒伤害：30
- 持续时间：3秒
- 扫射角度：120°
- 最大射程：15m
- 旋转速度：60°/s
- 冷却：12秒

**应对策略**：
- 向激光扫射的反方向移动
- 利用岩石作为掩体
- 远程攻击期间Boss无法移动

### 4.3 召唤机械蟹
**机制说明**：
- 召唤2只机械蟹协助战斗
- 小怪会干扰玩家
- 击杀小怪后Boss会暴露弱点

**数值**：
- 召唤数量：2只
- 召唤时间：2秒
- 冷却：20秒
- 小怪生命值：200 HP

**应对策略**：
- 优先清理小怪
- 利用AOE技能同时攻击Boss和小怪
- 小怪存在时Boss攻击频率降低

---

## 5. 第三阶段（30%以下）

### 5.1 狂暴模式
**属性提升**：
- 攻击力：+50%
- 移动速度：+30%
- 攻击速度：+50%
- 全身发红光特效

### 5.2 全屏地震
**机制说明**：
- 全屏范围攻击
- 必须跳跃躲避
- 多波次地震波

**数值**：
- 伤害：100/次
- 持续时间：4秒
- 预警时间：2秒
- 地震波间隔：0.8秒
- 冷却：25秒

**应对策略**：
- 听到预警立即准备跳跃
- 掌握地震波节奏连续跳跃
- 利用无敌帧技能躲避

### 5.3 背部核心弱点
**机制说明**：
- 第三阶段特有机制
- 背部核心周期性暴露
- 攻击核心造成3倍伤害

**数值**：
- 暴露时间：5秒
- 冷却：15秒
- 伤害倍率：3x
- 暴露角度：背后45°

**应对策略**：
- 绕到Boss背后攻击
- 使用高伤害技能在暴露期输出
- 配合控制技能延长输出时间

---

## 6. 场景互动

### 6.1 可破坏岩石
**功能**：
- 提供临时掩体
- 被破坏时对周围造成伤害
- 可以阻挡Boss冲撞

**数值**：
- 生命值：100 HP
- 爆炸伤害：30
- 爆炸范围：3m
- 碎片数量：5个

### 6.2 即死深渊
**机制**：
- 场景边缘的深渊区域
- 掉落即死
- 有视觉特效提示

**数值**：
- 伤害：9999（即死）
- 触发范围：场景边界2m内

### 6.3 胜利传送门
**机制**：
- Boss被击败后激活
- 传送至下一区域
- 有华丽的激活特效

---

## 7. AI行为树

### 7.1 状态优先级
1. 阶段转换（最高优先级）
2. 死亡
3. 防御姿态（如果受到连续攻击）
4. 特殊技能（根据阶段和冷却）
5. 普通攻击
6. 追击
7. 待机

### 7.2 攻击选择逻辑
**第一阶段**：
- 70% 钳击连击
- 20% 冲撞（距离>5m）
- 10% 防御姿态

**第二阶段**：
- 50% 钳击连击
- 20% 激光扫射（距离>8m）
- 15% 冲撞
- 10% 召唤
- 5% 防御姿态

**第三阶段**：
- 40% 钳击连击
- 25% 地震（冷却好时优先）
- 15% 激光扫射
- 10% 冲撞
- 10% 暴露弱点（周期性）

---

## 8. 视觉与音效

### 8.1 阶段视觉变化
| 阶段 | 环境光照 | Boss特效 | UI颜色 |
|------|----------|----------|--------|
| 第一阶段 | 冷白色 | 蓝色能量 | 绿色 |
| 第二阶段 | 橙黄色 | 橙色能量 | 黄色 |
| 第三阶段 | 暗红色 | 红色狂暴 | 红色 |

### 8.2 关键音效
- 阶段转换：低沉的机械轰鸣
- 钳击：金属撞击声
- 冲撞：引擎加速+撞击声
- 激光：能量充能+持续嗡鸣
- 地震：低频震动声
- 弱点暴露：能量泄漏声

### 8.3 特效需求
- 阶段转换：全身能量爆发
- 攻击预警：红色警示线/区域
- 受击：金属火花
- 防御：能量护盾
- 狂暴：红色粒子环绕

---

## 9. 平衡性考虑

### 9.1 难度曲线
- 第一阶段：学习阶段，相对简单
- 第二阶段：压力增加，需要处理小怪
- 第三阶段：极限挑战，考验反应和输出

### 9.2 容错设计
- 每次攻击前有预警
- 防御姿态提供喘息机会
- 血瓶刷新点（如果需要）

### 9.3 输出窗口
- 攻击后硬直：1-2秒
- 冲撞撞墙：2秒眩晕
- 破防：2秒眩晕
- 弱点暴露：5秒

---

## 10. 技术实现要点

### 10.1 性能优化
- 激光使用射线检测而非碰撞体
- 地震波使用定时触发而非持续检测
- 特效使用对象池

### 10.2 网络同步（如果需要）
- Boss状态同步
- 攻击预警同步
- 阶段转换同步

### 10.3 调试工具
- 显示攻击范围Gizmo
- 血条调试显示
- AI决策日志

---

## 11. 美术资源需求

详见 `BossArtRequirements.md`

---

## 12. 版本历史

| 版本 | 日期 | 修改内容 |
|------|------|----------|
| 1.0 | 2026-02-27 | 初始版本 |
